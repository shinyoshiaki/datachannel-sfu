(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(54)},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),u=n.n(c),o=n(4),s=n.n(o),l=n(6),i=n(2),p=n(8),b=n.n(p),d=n(21),f=n.n(d);function m(e){var t=Object(r.useState)(e||""),n=Object(i.a)(t,2),a=n[0],c=n[1];return[a,function(e){c(e.target.value)},function(){c("")}]}var v=function(e){var t=e.peer,n=m(),r=Object(i.a)(n,3),c=r[0],u=r[1],o=r[2];return a.a.createElement("div",null,a.a.createElement("input",{placeholder:"send",onChange:u,value:c}),a.a.createElement("button",{onClick:function(){t.isConnected&&(t.send(c),o())}},"send"))},j="http://34.73.92.59:8088",O=function(){var e=Object(r.useRef)({peer:new f.a({trickle:!0})}),t=Object(r.useState)(""),n=Object(i.a)(t,2),c=n[0],u=n[1],o=m("a"),p=Object(i.a)(o,2),d=p[0],O=p[1],w=function(e,t){var n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],u=a[1],o=Object(r.useState)(!1),p=Object(i.a)(o,2),b=p[0],d=p[1],f=Object(r.useState)(),m=Object(i.a)(f,2),v=m[0],j=m[1];return{loading:c,fetch:function(){var n=Object(l.a)(s.a.mark(function n(r){var a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u(!0),!r){n.next=7;break}return n.next=4,e(r);case 4:n.t0=n.sent,n.next=10;break;case 7:return n.next=9,e(void 0);case 9:n.t0=n.sent;case 10:return(a=n.t0)||d(!0),u(!1),j(a),t&&a&&t(a),n.abrupt("return",a);case 16:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),error:b,result:v}}(Object(l.a)(s.a.mark(function t(){var n,r,a,c,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=12;break}if(!(n=e.current.peer).isConnected){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,b.a.post(j+"/join",{room:d});case 6:return r=t.sent,a=r.data,c=a.sdp,u=a.uu,n.setSdp(c),t.next=11,new Promise(function(e){n.onSignal.subscribe(function(e){var t=e.sdp,n=e.type,r=e.ice;t=t||r,b.a.post(j+"/answer",{type:n,sdp:t,room:d,uu:u})}),n.onConnect.once(e)});case 11:return t.abrupt("return",{uu:u});case 12:case"end":return t.stop()}},t)})),function(){console.log("connected"),e.current.peer.onData.subscribe(function(e){console.log({v:e}),"string"===typeof e.data&&u(e.data)})}),E=w.fetch,g=w.loading,h=w.error,k=w.result;return a.a.createElement("div",null,a.a.createElement("input",{placeholder:"room",onChange:O,value:d}),a.a.createElement("button",{onClick:E},"join"),g&&a.a.createElement("p",null,"loading"),h&&a.a.createElement("p",null,"error"),k&&a.a.createElement("p",null,k.uu),a.a.createElement(v,{peer:e.current.peer}),a.a.createElement("p",null,c))};u.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.b2be19cd.chunk.js.map